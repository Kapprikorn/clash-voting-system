<div class="col-md-6 col-lg-4 mb-3">
  <div class="card h-100 border"
       [class.border-success]="hasUserVotedForChampion()"
       [class.bg-light]="hasUserVotedForChampion()">
    <div class="card-body d-flex flex-column">
      <!-- Champion Image and Name -->
      <div class="d-flex align-items-center mb-3">
        @if (championImageUrl) {
          <img
            [ngSrc]="championImageUrl"
            [alt]="champion.name"
            class="champion-image me-3"
            width="100"
            height="100"
            style="object-fit: cover; border-radius: 8px;"
          >
        }
        <div>
          <h5 class="card-title mb-1">{{ champion.name }}</h5>
        </div>
      </div>

      <div class="mt-auto">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="badge bg-primary fs-6">{{ champion.votes.length }} votes</span>
          @if (hasUserVotedForChampion()) {
            <i class="fas fa-check-circle text-success"></i>
          }
        </div>

        @if (hasUserVotedForChampion()) {
          <!-- Unvote Button -->
          <button
            class="btn btn-outline-danger w-100"
            [disabled]="isVoting"
            (click)="unvote(champion.id, champion.name)">

            @if (isVoting) {
              <span class="spinner-border spinner-border-sm me-2" role="status"></span>
              Removing...
            } @else {
              <i class="fas fa-times me-2"></i>Remove Vote
            }
          </button>
        } @else {
          <!-- Vote Button -->
          <button
            class="btn w-100"
            [class.btn-outline-primary]="user"
            [class.btn-outline-secondary]="!user"
            [disabled]="isVoting || !user"
            (click)="vote(champion.id, champion.name)">

            @if (isVoting) {
              <span class="spinner-border spinner-border-sm me-2" role="status"></span>
              Voting...
            } @else {
              @if (!user) {
                <i class="fas fa-lock me-2"></i>Sign in to Vote
              } @else {
                <i class="fas fa-vote-yea me-2"></i>Vote
              }
            }
          </button>
        }
      </div>
    </div>
  </div>
</div>
