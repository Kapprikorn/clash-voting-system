<div class="container mt-4">
  <h2>League of Legends Champion Voting</h2>

  @if (currentSessionId) {
    <div class="alert alert-info">
      <strong>Current Session:</strong> {{ currentSessionId }}
    </div>
  }

  <app-login (adminStatusChange)="onAdminStatusChange($event)" />

  <!-- Login Required Message -->
  @if (!currentUser) {
    <div class="alert alert-warning mt-4">
      <i class="fas fa-sign-in-alt"></i> Please sign in to vote and participate in the poll!
    </div>
  }

  <!-- User Vote Summary -->
  @if (currentUser && getUserVoteCount() > 0) {
    <div class="alert alert-success mt-4">
      <i class="fas fa-check-circle"></i> You have voted for <strong>{{ getUserVoteCount() }}</strong> champion(s).
                                          You can vote once per champion!
    </div>
  }

  <!-- Admin Controls -->
  @if (isAdmin) {
    <div class="card mt-4 border-warning">
      <div class="card-header bg-warning">
        <h5>Admin Controls</h5>
      </div>
      <div class="card-body">
        <button
          class="btn btn-danger"
          (click)="clearAllChampions()"
          [disabled]="isLoading">
          Start New Session (Archive Current)
        </button>
        <small class="form-text text-muted">
          This will create a new voting session and archive the current one.
        </small>
      </div>
    </div>
  }

  <!-- Add Champion -->
  <app-add-champion-section [user]="currentUser"
                            [availableChampions]="availableChampions"
                            [sessionId]="currentSessionId"
                            [isAdmin]="isAdmin"
                            [isLoading]="isLoading"
  />

  <!-- Voting Section -->
  <app-voting-section [champions]="champions"
                      [user]="currentUser"
                      [sessionId]="currentSessionId"
  />
</div>
